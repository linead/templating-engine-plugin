

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Externalizing Library Configuration &mdash; Jenkins Templating Engine  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/banner.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Validate Library Parameters" href="validate_library_parameters.html" />
    <link rel="prev" title="Getting Started" href="getting_started.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Jenkins Templating Engine
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Pipeline Templating üß©</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Pipeline_Templating/what_is_a_pipeline_template.html">What is a pipeline template?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Pipeline_Templating/configuration_files.html">Configuration Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Pipeline_Templating/configuration_file_sandboxing.html">Configuration File Sandboxing</a></li>
</ul>
<p class="caption"><span class="caption-text">Job Types ‚öôÔ∏è</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Job_Configurations/template_step.html">The Template Step</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Job_Configurations/pipeline.html">Individual Pipeline Jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Job_Configurations/repository.html">Multibranch Job</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Job_Configurations/github_org.html">GitHub Organization Job</a></li>
</ul>
<p class="caption"><span class="caption-text">Primitives ‚ö°Ô∏è</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Primitives/what_is_a_primitive_in_jte.html">What is a primitive in JTE?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Primitives/application_environments.html">Application Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Primitives/stages.html">Stages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Primitives/keywords.html">Keywords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Primitives/default_step_implementation.html">Default Step Implementation</a></li>
</ul>
<p class="caption"><span class="caption-text">Library Development üìñ</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Externalizing Library Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="validate_library_parameters.html">Validate Library Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="lifecycle_hooks.html">Leverage Lifecycle Hooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="multimethod_steps.html">Multi-Method Steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="library_sources.html">Library Sources</a></li>
</ul>
<p class="caption"><span class="caption-text">Governance üëÆ‚Äç</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Governance/governance_model.html">Governance Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Governance/governance_tier.html">Governance Tier</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Governance/hierarchical_governance.html">Hierarchical Governance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Governance/config_file_aggregation.html">Configuration File Aggregation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Governance/conditional_inheritance.html">Conditional Inheritance Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Governance/pipeline_template_selection.html">Pipeline Template Selection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Governance/library_selection.html">Library Selection</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Jenkins Templating Engine</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Externalizing Library Configuration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/pages/Library_Development/externalizing_config.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  





<div class="section" id="externalizing-library-configuration">
<span id="id1"></span><h1>Externalizing Library Configuration<a class="headerlink" href="#externalizing-library-configuration" title="Permalink to this headline">¬∂</a></h1>
<p>One of the major benefits of organizing your pipeline code into libraries is
the ability to reuse these libraries across different teams.</p>
<p>In order to achieve this level of reusability, it‚Äôs best to externalize hard
coded values as parameters that can be set from the pipeline configuration repository.</p>
<div class="section" id="creating-an-example-step">
<h2>Creating an Example Step<a class="headerlink" href="#creating-an-example-step" title="Permalink to this headline">¬∂</a></h2>
<p>To demonstrate how to do this, let‚Äôs create a step that simply prints a message a
specified number of times, with both the message and number of times printed being
values passed via the configuration file.</p>
<div class="section" id="repository-structure">
<h3>Repository Structure<a class="headerlink" href="#repository-structure" title="Permalink to this headline">¬∂</a></h3>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">README</span><span class="o">.</span><span class="n">rst</span>
<span class="n">example</span><span class="o">/</span>
    <span class="n">printAThing</span><span class="o">.</span><span class="n">groovy</span>
</pre></div>
</div>
<p>With this source code repository configured as a Library Source, we would be
able to load the <code class="docutils literal"><span class="pre">example</span></code> library from our pipeline configuration repository
and invoke the <code class="docutils literal"><span class="pre">printAThing()</span></code> step from a pipeline template.</p>
</div>
<div class="section" id="library-configuration">
<h3>Library Configuration<a class="headerlink" href="#library-configuration" title="Permalink to this headline">¬∂</a></h3>
<p>When writing a library step, a <code class="docutils literal"><span class="pre">config</span></code> variable comes autowired into your scope
that can be referenced to access configurations defined in your library block from
the configuration file.</p>
<p>Let‚Äôs create a configuration parameter <code class="docutils literal"><span class="pre">number</span></code> to represent the number of times
to print the message and a configuration parameter <code class="docutils literal"><span class="pre">message</span></code> to represent the
message to be printed.</p>
<p><strong>pipeline_config.groovy</strong>:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">libraries</span><span class="p">{</span>
    <span class="n">example</span><span class="p">{</span>
        <span class="n">number</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;my message to be printed!&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="step-declaration">
<h3>Step Declaration<a class="headerlink" href="#step-declaration" title="Permalink to this headline">¬∂</a></h3>
<p>We can now write our library step to access these parameters directly on the
<code class="docutils literal"><span class="pre">config</span></code> variable automatically provided to the step.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">To access the number of times to print the message, read the <code class="docutils literal"><span class="pre">config.number</span></code>
value.  To access the message to be printed, read the <code class="docutils literal"><span class="pre">config.message</span></code> value.</p>
</div>
<p><strong>printAThing.groovy</strong>:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">call</span><span class="p">(){</span>
    <span class="k">for</span><span class="p">(</span><span class="k">def</span> <span class="nf">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">config</span><span class="o">.</span><span class="n">number</span><span class="p">,</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">println</span> <span class="n">config</span><span class="o">.</span><span class="n">message</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="conclusion">
<h3>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¬∂</a></h3>
<p>We learned how to access external library configurations via the pipeline configuration
repository.  These parameters can be any serializable data type and are accessible
from within your step via the autowired <code class="docutils literal"><span class="pre">config</span></code> variable.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">The pipeline step we built today has some flaws.  It does not guarantee that
the number of times to print the message is an Integer or that the message
to be printed is a String. For next steps, learn how to <a class="reference internal" href="validate_library_parameters.html#validate-library-parameters"><span class="std std-ref">validate library
parameters</span></a></p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="validate_library_parameters.html" class="btn btn-neutral float-right" title="Validate Library Parameters" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="getting_started.html" class="btn btn-neutral float-left" title="Getting Started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Booz Allen Hamilton

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: master
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Tags</dt>
            <dd><a href="../../../1.0.0/pages/Library_Development/externalizing_config.html">1.0.0</a></dd>
            <dd><a href="../../../1.1/pages/Library_Development/externalizing_config.html">1.1</a></dd>
            <dd><a href="../../../1.1.1/pages/Library_Development/externalizing_config.html">1.1.1</a></dd>
            <dd><a href="../../../1.3/pages/Library_Development/externalizing_config.html">1.3</a></dd>
            <dd><a href="../../../v0.1-alpha/index.html">v0.1-alpha</a></dd>
            <dd><a href="../../../v1.2/pages/Library_Development/externalizing_config.html">v1.2</a></dd>
        </dl>
        <dl>
            <dt>Branches</dt>
            <dd><a href="externalizing_config.html">master</a></dd>
        </dl>
    </div>
</div>


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-144247959-2', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>